#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ –Ω–∞ GitHub

echo "üöÄ –ì–æ—Ç–æ–≤–ª—é –ø—Ä–æ–µ–∫—Ç –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ GitHub..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ git –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
if [ ! -d ".git" ]; then
    echo "‚ùå Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–º–º–∏—Ç–æ–≤
if ! git rev-parse --verify HEAD >/dev/null 2>&1; then
    echo "‚ùå –ù–µ—Ç –∫–æ–º–º–∏—Ç–æ–≤! –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–º–∏—Ç."
    exit 1
fi

echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:"
echo "1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub.com"
echo "2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://github.com/USERNAME/telegram-giveaway-bot.git)"
echo ""
read -p "–í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: " REPO_URL

if [ -z "$REPO_URL" ]; then
    echo "‚ùå URL –Ω–µ –≤–≤–µ–¥–µ–Ω!"
    exit 1
fi

# –î–æ–±–∞–≤–ª—è–µ–º remote
echo "üîó –ü–æ–¥–∫–ª—é—á–∞—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
git remote remove origin 2>/dev/null
git remote add origin "$REPO_URL"

# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –≤–µ—Ç–∫—É –≤ main (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
echo "üåø –ü—Ä–æ–≤–µ—Ä—è—é –≤–µ—Ç–∫—É..."
git branch -M main 2>/dev/null || echo "–í–µ—Ç–∫–∞ —É–∂–µ main"

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥
echo "üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é –∫–æ–¥ –Ω–∞ GitHub..."
git push -u origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ –ö–æ–¥ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ GitHub!"
    echo ""
    echo "üéâ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Render.com:"
    echo "   1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://render.com"
    echo "   2. New ‚Üí Web Service"
    echo "   3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π"
    echo "   4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ (—Å–º. RENDER_SETUP.md)"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ!"
    echo ""
    echo "üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:"
    echo "   ‚Ä¢ –ù—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Personal Access Token)"
    echo "   ‚Ä¢ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"
    echo "   ‚Ä¢ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω –Ω–∞ GitHub"
fi

